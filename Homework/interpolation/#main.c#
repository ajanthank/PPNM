#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <gsl/gsl_interp.h>

int E1(int n, double x[n], double y[n]){
  printf("#################### Exercise A ####################\n");

  printf("--------------- Question 1 ---------------\n");
  gsl_interp* linear = gsl_interp_alloc(gsl_interp_linear, n);

  gsl_interp_init(linear, x, y,n);

  FILE* data=fopen("LinData.txt","w");

  for (double z=x[0];z<=x[n-1];z+=1./16){
    double interp_l= gsl_interp_eval(linear, x, y, z, NULL);
    fprintf(data,"%10g %10g \n",z,interp_l);
  }
  fclose(data);
  gsl_interp_free(linear);
  return 0;
}

int main(){
  int n=10;

  double a=-2,b=2, x[n], y[n];

  FILE* xydata=fopen("XY.txt","w");

  for (int i=0;i<n;i++){
    x[i]=a+(b-a)*i/(n-1);
    y[i]=1/(1+pow(x[i],2));
    fprintf(xydata,"%10g %10g\n", x[i], y[i]);
  }
  E1(n,x,y);

  fclose(xydata);
  return 0;
}
